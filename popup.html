<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game Zone</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lucide/0.263.1/umd/lucide.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            margin: 0;
            width: 400px;
            height: 600px;
            overflow: hidden;
        }
    </style>
</head>

<body>
    <div id="app"
        class="w-full h-screen bg-gradient-to-br from-pink-100 via-purple-100 to-blue-100 flex items-center justify-center p-4">
        <div class="bg-white rounded-2xl shadow-2xl w-full max-w-md overflow-hidden border-4 border-purple-200">
            <div id="content"></div>
        </div>
    </div>

    <script>
        const state = {
            currentGame: 'menu',
            snakeScore: 0,
            snakeHighScore: 0,
            flappyScore: 0,
            flappyHighScore: 0,
            game2048Score: 0
        };

        const games = [
            { id: 'snake', name: 'Snake', color: 'bg-green-200', icon: 'üêç' },
            { id: 'flappy', name: 'Flappy Bird', color: 'bg-blue-200', icon: 'üê¶' },
            { id: '2048', name: '2048', color: 'bg-yellow-200', icon: 'üéØ' }
        ];

        function render() {
            const content = document.getElementById('content');

            if (state.currentGame === 'menu') {
                renderMenu(content);
            } else if (state.currentGame === 'snake') {
                renderSnake(content);
            } else if (state.currentGame === 'flappy') {
                renderFlappy(content);
            } else if (state.currentGame === '2048') {
                render2048(content);
            }
        }

        function renderMenu(container) {
            container.innerHTML = `
        <div class="p-8">
          <div class="text-center mb-8">
            <div class="w-16 h-16 mx-auto text-purple-300 mb-4 flex items-center justify-center">
              <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg>
            </div>
            <h1 class="text-4xl font-bold text-gray-800 mb-2">Game Zone</h1>
            <p class="text-gray-600">Choose your game and beat boredom!</p>
          </div>
          
          <div class="space-y-4">
            ${games.map(game => `
              <button onclick="selectGame('${game.id}')" class="w-full ${game.color} hover:opacity-80 text-gray-800 font-bold py-4 px-6 rounded-xl transition-all transform hover:scale-105 flex items-center justify-between shadow-lg">
                <span class="text-2xl">${game.icon}</span>
                <span class="text-xl">${game.name}</span>
                <span class="text-2xl">‚ñ∂</span>
              </button>
            `).join('')}
          </div>
        </div>
      `;
        }

        function selectGame(gameId) {
            state.currentGame = gameId;
            render();
        }

        function goHome() {
            state.currentGame = 'menu';
            render();
        }

        // SNAKE GAME
        let snakeInterval = null;
        let snakeGameState = null;

        function renderSnake(container) {
            container.innerHTML = `
        <div class="p-6">
          <div class="flex justify-between items-center mb-4">
            <button onclick="goHome()" class="text-gray-800 hover:text-purple-400">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>
            </button>
            <div class="text-gray-800 text-center">
              <div class="text-sm text-gray-600">Score: ${state.snakeScore}</div>
              <div class="text-xs text-gray-500 flex items-center gap-1 justify-center">
                <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"></path><path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"></path><path d="M4 22h16"></path><path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"></path><path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"></path><path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"></path></svg>
                ${state.snakeHighScore}
              </div>
            </div>
          </div>

          <canvas id="snakeCanvas" width="300" height="300" class="border-4 border-green-200 rounded-lg mx-auto block"></canvas>

          <div id="snakeControls" class="text-center mt-4">
            <button onclick="startSnake()" class="bg-green-200 hover:bg-green-300 text-gray-800 font-bold py-3 px-8 rounded-xl transition-all">
              Start Game
            </button>
            <p class="text-gray-600 text-sm mt-2">Use arrow keys to move</p>
          </div>
        </div>
      `;
        }

        function startSnake() {
            if (snakeInterval) clearInterval(snakeInterval);

            const canvas = document.getElementById('snakeCanvas');
            const ctx = canvas.getContext('2d');
            const gridSize = 20;
            const tileSize = 15;

            snakeGameState = {
                snake: [{ x: 10, y: 10 }],
                food: { x: 15, y: 15 },
                direction: { x: 1, y: 0 },
                nextDirection: { x: 1, y: 0 },
                gameOver: false
            };

            state.snakeScore = 0;
            document.getElementById('snakeControls').innerHTML = '<p class="text-gray-600 text-sm">Use arrow keys to move</p>';

            snakeInterval = setInterval(() => {
                if (snakeGameState.gameOver) {
                    clearInterval(snakeInterval);
                    if (state.snakeScore > state.snakeHighScore) {
                        state.snakeHighScore = state.snakeScore;
                    }
                    document.getElementById('snakeControls').innerHTML = `
            <button onclick="startSnake()" class="bg-green-200 hover:bg-green-300 text-gray-800 font-bold py-3 px-8 rounded-xl transition-all flex items-center gap-2 mx-auto">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8"></path><path d="M21 3v5h-5"></path></svg>
              Play Again
            </button>
            <p class="text-red-400 mt-2">Game Over!</p>
          `;
                    render();
                    return;
                }

                snakeGameState.direction = snakeGameState.nextDirection;

                const head = {
                    x: snakeGameState.snake[0].x + snakeGameState.direction.x,
                    y: snakeGameState.snake[0].y + snakeGameState.direction.y
                };

                if (head.x < 0 || head.x >= gridSize || head.y < 0 || head.y >= gridSize ||
                    snakeGameState.snake.some(segment => segment.x === head.x && segment.y === head.y)) {
                    snakeGameState.gameOver = true;
                    return;
                }

                snakeGameState.snake.unshift(head);

                if (head.x === snakeGameState.food.x && head.y === snakeGameState.food.y) {
                    state.snakeScore += 10;
                    snakeGameState.food = {
                        x: Math.floor(Math.random() * gridSize),
                        y: Math.floor(Math.random() * gridSize)
                    };
                    render();
                } else {
                    snakeGameState.snake.pop();
                }

                ctx.fillStyle = '#1a1a2e';
                ctx.fillRect(0, 0, canvas.width, canvas.height);

                ctx.fillStyle = '#86efac';
                snakeGameState.snake.forEach(segment => {
                    ctx.fillRect(segment.x * tileSize, segment.y * tileSize, tileSize - 1, tileSize - 1);
                });

                ctx.fillStyle = '#fca5a5';
                ctx.fillRect(snakeGameState.food.x * tileSize, snakeGameState.food.y * tileSize, tileSize - 1, tileSize - 1);
            }, 150);
        }

        document.addEventListener('keydown', (e) => {
            if (!snakeGameState || snakeGameState.gameOver) return;

            if (e.key === 'ArrowUp' && snakeGameState.direction.y === 0) {
                snakeGameState.nextDirection = { x: 0, y: -1 };
            }
            if (e.key === 'ArrowDown' && snakeGameState.direction.y === 0) {
                snakeGameState.nextDirection = { x: 0, y: 1 };
            }
            if (e.key === 'ArrowLeft' && snakeGameState.direction.x === 0) {
                snakeGameState.nextDirection = { x: -1, y: 0 };
            }
            if (e.key === 'ArrowRight' && snakeGameState.direction.x === 0) {
                snakeGameState.nextDirection = { x: 1, y: 0 };
            }
        });

        // FLAPPY BIRD GAME
        let flappyInterval = null;
        let flappyGameState = null;

        function renderFlappy(container) {
            container.innerHTML = `
        <div class="p-6">
          <div class="flex justify-between items-center mb-4">
            <button onclick="goHome()" class="text-gray-800 hover:text-purple-400">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>
            </button>
            <div class="text-gray-800 text-center">
              <div class="text-sm text-gray-600">Score: ${state.flappyScore}</div>
              <div class="text-xs text-gray-500 flex items-center gap-1 justify-center">
                <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"></path><path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"></path><path d="M4 22h16"></path><path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"></path><path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"></path><path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"></path></svg>
                ${state.flappyHighScore}
              </div>
            </div>
          </div>

          <canvas id="flappyCanvas" width="300" height="300" class="border-4 border-blue-200 rounded-lg mx-auto block cursor-pointer"></canvas>

          <div id="flappyControls" class="text-center mt-4">
            <button onclick="startFlappy()" class="bg-blue-200 hover:bg-blue-300 text-gray-800 font-bold py-3 px-8 rounded-xl transition-all">
              Start Game
            </button>
            <p class="text-gray-600 text-sm mt-2">Click to flap</p>
          </div>
        </div>
      `;
        }

        function startFlappy() {
            if (flappyInterval) clearInterval(flappyInterval);

            const canvas = document.getElementById('flappyCanvas');
            const ctx = canvas.getContext('2d');

            flappyGameState = {
                bird: { y: 150, velocity: 0 },
                pipes: [{ x: 300, gap: 120, gapY: 150 }],
                frame: 0,
                gameOver: false
            };

            state.flappyScore = 0;
            document.getElementById('flappyControls').innerHTML = '<p class="text-gray-600 text-sm">Click to flap</p>';

            const gravity = 0.5;
            const jumpStrength = -8;

            flappyInterval = setInterval(() => {
                if (flappyGameState.gameOver) {
                    clearInterval(flappyInterval);
                    if (state.flappyScore > state.flappyHighScore) {
                        state.flappyHighScore = state.flappyScore;
                    }
                    document.getElementById('flappyControls').innerHTML = `
            <button onclick="startFlappy()" class="bg-blue-200 hover:bg-blue-300 text-gray-800 font-bold py-3 px-8 rounded-xl transition-all flex items-center gap-2 mx-auto">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8"></path><path d="M21 3v5h-5"></path></svg>
              Play Again
            </button>
            <p class="text-red-400 mt-2">Game Over!</p>
          `;
                    render();
                    return;
                }

                flappyGameState.frame++;
                flappyGameState.bird.velocity += gravity;
                flappyGameState.bird.y += flappyGameState.bird.velocity;

                if (flappyGameState.bird.y < 0 || flappyGameState.bird.y > 290) {
                    flappyGameState.gameOver = true;
                    return;
                }

                flappyGameState.pipes.forEach(pipe => {
                    pipe.x -= 2;

                    if (pipe.x + 50 > 30 && pipe.x < 60 &&
                        (flappyGameState.bird.y < pipe.gapY || flappyGameState.bird.y > pipe.gapY + pipe.gap)) {
                        flappyGameState.gameOver = true;
                    }

                    if (pipe.x === 30) {
                        state.flappyScore += 1;
                        render();
                    }
                });

                flappyGameState.pipes = flappyGameState.pipes.filter(pipe => pipe.x > -50);

                if (flappyGameState.frame % 120 === 0) {
                    flappyGameState.pipes.push({
                        x: 300,
                        gap: 120,
                        gapY: Math.random() * 100 + 50
                    });
                }

                ctx.fillStyle = '#fef3c7';
                ctx.fillRect(0, 0, canvas.width, canvas.height);

                // Load bird image (add this near the top of startFlappy function, after flappyGameState)
                const birdImg = new Image();
                birdImg.src = 'images/bird.png';

                // Then in the game loop, replace the circle drawing with:
                if (birdImg.complete) {
                    ctx.drawImage(birdImg, 30, flappyGameState.bird.y - 15, 60, 60);
                } else {
                    // Fallback to yellow circle if image hasn't loaded yet
                    ctx.fillStyle = '#fde047';
                    ctx.beginPath();
                    ctx.arc(45, flappyGameState.bird.y, 15, 0, Math.PI * 2);
                    ctx.fill();
                }

                ctx.fillStyle = '#86efac';
                flappyGameState.pipes.forEach(pipe => {
                    ctx.fillRect(pipe.x, 0, 50, pipe.gapY);
                    ctx.fillRect(pipe.x, pipe.gapY + pipe.gap, 50, 300);
                });
            }, 20);

            canvas.onclick = () => {
                if (!flappyGameState.gameOver) {
                    flappyGameState.bird.velocity = jumpStrength;
                }
            };
        }

        // 2048 GAME
        let board2048 = [];

        function render2048(container) {
            if (board2048.length === 0) {
                init2048();
            }

            container.innerHTML = `
        <div class="p-6">
          <div class="flex justify-between items-center mb-4">
            <button onclick="goHome()" class="text-gray-800 hover:text-purple-400">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>
            </button>
            <div class="text-gray-800 text-xl font-bold">Score: ${state.game2048Score}</div>
          </div>

          <div class="bg-gray-200 p-2 rounded-lg mx-auto" style="width: fit-content;">
            ${board2048.map((row, i) => `
              <div class="flex gap-2 mb-2">
                ${row.map((cell, j) => `
                  <div class="w-16 h-16 ${getTileColor(cell)} rounded flex items-center justify-center text-2xl font-bold text-gray-800">
                    ${cell > 0 ? cell : ''}
                  </div>
                `).join('')}
              </div>
            `).join('')}
          </div>

          <div id="game2048Controls" class="text-center mt-4">
            <p class="text-gray-600 text-sm">Use arrow keys to play</p>
          </div>
        </div>
      `;
        }

        function init2048() {
            board2048 = Array(4).fill(null).map(() => Array(4).fill(0));
            addNewTile2048();
            addNewTile2048();
            state.game2048Score = 0;
        }

        function addNewTile2048() {
            const empty = [];
            for (let i = 0; i < 4; i++) {
                for (let j = 0; j < 4; j++) {
                    if (board2048[i][j] === 0) empty.push([i, j]);
                }
            }
            if (empty.length > 0) {
                const [i, j] = empty[Math.floor(Math.random() * empty.length)];
                board2048[i][j] = Math.random() < 0.9 ? 2 : 4;
            }
        }

        function getTileColor(value) {
            const colors = {
                0: 'bg-gray-300',
                2: 'bg-yellow-100',
                4: 'bg-yellow-200',
                8: 'bg-orange-200',
                16: 'bg-orange-300',
                32: 'bg-red-200',
                64: 'bg-red-300',
                128: 'bg-yellow-300',
                256: 'bg-yellow-400',
                512: 'bg-pink-300',
                1024: 'bg-pink-400',
                2048: 'bg-purple-300'
            };
            return colors[value] || 'bg-purple-400';
        }

        function move2048(direction) {
            let moved = false;
            const newBoard = board2048.map(row => [...row]);

            const compress = (row) => row.filter(val => val !== 0);
            const merge = (row) => {
                for (let i = 0; i < row.length - 1; i++) {
                    if (row[i] === row[i + 1]) {
                        row[i] *= 2;
                        state.game2048Score += row[i];
                        row[i + 1] = 0;
                    }
                }
                return row;
            };

            const processRow = (row) => {
                let compressed = compress(row);
                let merged = merge(compressed);
                compressed = compress(merged);
                while (compressed.length < 4) compressed.push(0);
                return compressed;
            };

            if (direction === 'left' || direction === 'right') {
                for (let i = 0; i < 4; i++) {
                    let row = newBoard[i];
                    if (direction === 'right') row = row.reverse();
                    const processed = processRow(row);
                    if (direction === 'right') processed.reverse();
                    if (JSON.stringify(processed) !== JSON.stringify(newBoard[i])) moved = true;
                    newBoard[i] = processed;
                }
            } else {
                for (let j = 0; j < 4; j++) {
                    let col = newBoard.map(row => row[j]);
                    if (direction === 'down') col = col.reverse();
                    const processed = processRow(col);
                    if (direction === 'down') processed.reverse();
                    if (JSON.stringify(processed) !== JSON.stringify(col)) moved = true;
                    for (let i = 0; i < 4; i++) newBoard[i][j] = processed[i];
                }
            }

            if (moved) {
                board2048 = newBoard;
                addNewTile2048();
                render();

                if (!canMove2048()) {
                    setTimeout(() => {
                        document.getElementById('game2048Controls').innerHTML = `
              <button onclick="reset2048()" class="bg-yellow-200 hover:bg-yellow-300 text-gray-800 font-bold py-3 px-8 rounded-xl transition-all flex items-center gap-2 mx-auto">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8"></path><path d="M21 3v5h-5"></path></svg>
                Play Again
              </button>
              <p class="text-red-400 mt-2">Game Over!</p>
            `;
                    }, 100);
                }
            }
        }

        function canMove2048() {
            for (let i = 0; i < 4; i++) {
                for (let j = 0; j < 4; j++) {
                    if (board2048[i][j] === 0) return true;
                    if (j < 3 && board2048[i][j] === board2048[i][j + 1]) return true;
                    if (i < 3 && board2048[i][j] === board2048[i + 1][j]) return true;
                }
            }
            return false;
        }

        function reset2048() {
            board2048 = [];
            init2048();
            render();
        }

        document.addEventListener('keydown', (e) => {
            if (state.currentGame === '2048') {
                if (e.key === 'ArrowUp') move2048('up');
                if (e.key === 'ArrowDown') move2048('down');
                if (e.key === 'ArrowLeft') move2048('left');
                if (e.key === 'ArrowRight') move2048('right');
            }
        });

        // Initial render
        render();
    </script>
</body>

</html>